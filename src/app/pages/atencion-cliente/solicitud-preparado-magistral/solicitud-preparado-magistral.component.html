<div class="container-fluid mt-5" style="padding: 0px 60px;">
  <div class="card shadow-lg p-4 rounded-4">
    <h2 class="mb-4 text-center">Solicitud de Preparado Magistral</h2>
    <form [formGroup]="solicitudForm" (ngSubmit)="onSubmit()">
      <div class="row g-3">
        
        <!-- Campo Descripción -->
        <div class="col-md-12">
          <label for="descripcion" class="form-label fw-bold">Descripción <span class="text-danger">*</span></label>
          <textarea 
            class="form-control" 
            id="descripcion" 
            formControlName="descripcion"
            rows="4"
            placeholder="Describa los detalles del preparado magistral solicitado..."
            [class.is-invalid]="solicitudForm.get('descripcion')?.invalid && solicitudForm.get('descripcion')?.touched">
          </textarea>
          <div *ngIf="solicitudForm.get('descripcion')?.invalid && solicitudForm.get('descripcion')?.touched" class="text-danger small">
            La descripción es obligatoria
          </div>
        </div>

        <!-- Campo Archivo -->
        <div class="col-md-6">
          <label for="archivo" class="form-label fw-bold">Adjunto <span class="text-danger">*</span></label>
          <input 
            type="file" 
            class="form-control" 
            id="archivo"
            (change)="onArchivoSeleccionado($event)"
            accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
            [class.is-invalid]="solicitudForm.get('archivo')?.invalid && solicitudForm.get('archivo')?.touched">
          <div class="text-secondary small">
            Formatos permitidos: PDF, DOC, DOCX, JPG, JPEG, PNG. Tamaño máximo: 4MB
          </div>
          <div *ngIf="solicitudForm.get('archivo')?.invalid && solicitudForm.get('archivo')?.touched" class="text-danger small">
            El archivo es obligatorio
          </div>
        </div>

        <!-- Información del archivo seleccionado -->
        <div class="col-md-6" *ngIf="archivoSeleccionado">
          <div class="alert alert-info">
            <i class="fas fa-file"></i>
            <strong>Archivo seleccionado:</strong> {{ archivoSeleccionado.name }}
            <br>
            <small>Tamaño: {{ (archivoSeleccionado.size / 1024 / 1024).toFixed(2) }} MB</small>
          </div>
        </div>

      </div>

      <!-- Botones -->
      <div class="text-center mt-4">
        <button 
          type="submit" 
          class="btn btn-primary px-5 py-2 rounded-4 me-3"
          [disabled]="!isFormValid || isSubmitting">
          @if (isSubmitting) {
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Enviando...
          } @else {
            Enviar Solicitud
          }
        </button>
        <button 
          type="button" 
          class="btn btn-secondary px-5 py-2 rounded-4"
          (click)="limpiarFormulario()"
          [disabled]="isSubmitting">
          Limpiar
        </button>
      </div>

    </form>
  </div>
</div>
